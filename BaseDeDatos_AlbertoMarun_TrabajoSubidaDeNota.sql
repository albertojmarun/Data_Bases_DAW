/*
    Base de Datos - Trabajo Subida de Nota.
    @author: Alberto Jose Marún Indriago.
    @version: 1.0
*/
-- PERSONA(NIF, Nombre, Apellidos, Dirección).
CREATE TABLE PERSONA(
    NIF VARCHAR2(9),
    NOMBRE VARCHAR2(20),
    APELLIDO VARCHAR2(40),
    DIRECCION VARCHAR2(100),
    CONSTRAINT PK_PERSONA PRIMARY KEY(NIF)
);

INSERT INTO PERSONA VALUES('111111111', 'ALBERTO', 'MARUN INDRIAGO', 'AVENIDA FUEN SANTA 27, CORDOBA, 14005, ESPAÑA');
INSERT INTO PERSONA VALUES('222222222', 'JUAN', 'MONTERO MUÑOZ', 'AVENIDA GUERRITA 24, CORDOBA, 14005, ESPAÑA');
INSERT INTO PERSONA VALUES('333333333', 'GABRIELA', 'PABON PAZ', 'AVENIDA CARACAS 44, CORDOBA, 14005, ESPAÑA');
INSERT INTO PERSONA VALUES('444444444', 'ANA', 'MARULANDA SUAREZ', 'AVENIDA MADRID 1, CORDOBA, 14005, ESPAÑA');
INSERT INTO PERSONA VALUES('555555555', 'FEDERICO', 'PALMA NARANJO', 'CALLE CAMPEONES 13, CORDOBA, 14005, ESPAÑA');
INSERT INTO PERSONA VALUES('666666666', 'CLAUDIA', 'AURE PI', 'CALLE CLARET 48, CORDOBA, 14005, ESPAÑA');

-- SOCIO(SOCIO_ID, NIF, Teléfono, Sanción, Número de Cuenta Corriente).
CREATE TABLE SOCIO(
    SOCIO_ID INTEGER,
    NIF VARCHAR2(9),
    TELEFONO VARCHAR2(9),
    SANCION VARCHAR2(2) DEFAULT 'NO',
    NUMERO_CUENTA_CORRIENTE VARCHAR2(24),
    CONSTRAINT PK_SOCIO PRIMARY KEY(SOCIO_ID),
    CONSTRAINT FK_SOCIO_PERSONA FOREIGN KEY (NIF) REFERENCES PERSONA(NIF)
);

INSERT INTO SOCIO VALUES(1, '111111111', '123456789', 'NO', 'ES1134567890123456789012');
INSERT INTO SOCIO VALUES(2, '222222222', '234567891', 'NO', 'ES2234567890123456789012');
INSERT INTO SOCIO VALUES(3, '333333333', '345678912', 'SI', 'ES3334567890123456789012');

--  MONITOR(Número de Empleado, NIF).
CREATE TABLE MONITOR(
    EMPLEADO_ID INTEGER,
    NIF VARCHAR2(9),
    CONSTRAINT PK_MONITOR PRIMARY KEY(EMPLEADO_ID),
    CONSTRAINT FK_MONITOR_PERSONA FOREIGN KEY (NIF) REFERENCES PERSONA(NIF)
);

INSERT INTO MONITOR VALUES(4, '444444444');
INSERT INTO MONITOR VALUES(5, '555555555');
INSERT INTO MONITOR VALUES(6, '666666666');

-- EJERCICIO(NOMBRE, Instrucciones, Músculos).
CREATE TABLE EJERCICIO(
    NOMBRE VARCHAR2(20),
    INSTRUCCIONES VARCHAR2(100),
    MUSCULOS VARCHAR2(50),
    CONSTRAINT PK_EJERCICIO PRIMARY KEY(NOMBRE)
);

INSERT INTO EJERCICIO VALUES('ABDOMINALES', ' Acerca el torso a las rodillas sin levantar la espalda del suelo', 'ABDOMINALES');
INSERT INTO EJERCICIO VALUES('FLEXIONES', ' Flexiona los brazos sin que las rodillas ni pecho toquen el suelo', 'BICEPS - ESPALDA');
INSERT INTO EJERCICIO VALUES('BICEPS ALTERNADO', 'Flexión de los brazos hacia el pecho de forma cruzada', 'BICEPS - TRICEPS');
 
-- PLAN_ENTRENAMIENTO(SOCIO_ID, NOMBRE_EJERCICIO, Repeticiones, Peso).
CREATE TABLE PLAN_ENTRENAMIENTO(
    SOCIO_ID INTEGER,
    EJERCICIO VARCHAR2(20),
    REPETICIONES INTEGER,
    PESO NUMBER(5, 2),
    CONSTRAINT PK_PLAN_ENTRENAMIENTO PRIMARY KEY(SOCIO_ID, EJERCICIO),
    CONSTRAINT FK_SOCIO_ENTRENAMIENTO FOREIGN KEY(SOCIO_ID) REFERENCES SOCIO(SOCIO_ID),
    CONSTRAINT FK_EJERCICIO_ENTRENAMIENTO FOREIGN KEY(EJERCICIO) REFERENCES EJERCICIO(NOMBRE)
);

INSERT INTO PLAN_ENTRENAMIENTO VALUES(1, 'ABDOMINALES', 15, NULL);
INSERT INTO PLAN_ENTRENAMIENTO VALUES(1, 'FLEXIONES', 30, NULL);
INSERT INTO PLAN_ENTRENAMIENTO VALUES(2, 'ABDOMINALES', 10, NULL);
INSERT INTO PLAN_ENTRENAMIENTO VALUES(2, 'BICEPS ALTERNADO', 12, 10.5);

-- ASISTENCIA(SOCIO_ID, Hora Entrada, Hora Salida)
CREATE TABLE ASISTENCIA(
    SOCIO_ID INTEGER,
    HORA_ENTRADA TIMESTAMP,
    HORA_SALIDA TIMESTAMP,
    CONSTRAINT PK_ASISTENCIA PRIMARY KEY(SOCIO_ID, HORA_ENTRADA, HORA_SALIDA)
);

INSERT INTO ASISTENCIA VALUES(3, '07/06/21 22:47:37, 587819000', '07/06/21 23:47:37, 587819000');
INSERT INTO ASISTENCIA VALUES(3, '04/06/21 09:00:00, 162279360', '04/06/21 10:00:00, 162279720');
INSERT INTO ASISTENCIA VALUES(1, '01/06/21 19:00:00, 162257040', '01/06/21 20:00:00, 162257400');
INSERT INTO ASISTENCIA VALUES(2, '02/06/21 20:00:00, 162266040', '02/06/21 21:00:00, 162266400');

-- CLASE(Tipo de Clase, Monitor, Hora_Inicio, Hora_Final, Numero_Max_Socios).
CREATE TABLE CLASE(
    TIPO_CLASE VARCHAR2(20),
    MONITOR_ID INTEGER,
    HORA_INICIO TIMESTAMP,
    HORA_FINAL TIMESTAMP,
    MAX_SOCIOS INTEGER,
    CONSTRAINT PK_CLASE PRIMARY KEY(TIPO_CLASE, MONITOR_ID),
    CONSTRAINT FK_MONITOR_CLASE FOREIGN KEY(MONITOR_ID) REFERENCES MONITOR(EMPLEADO_ID)
);

INSERT INTO CLASE VALUES('CORE', 4, '04/06/21 09:00:00, 162279360', '04/06/21 10:00:00, 162279720', 20);
INSERT INTO CLASE VALUES('YOGA', 5, '01/06/21 19:00:00, 162257040', '01/06/21 20:00:00, 162257400', 5);
INSERT INTO CLASE VALUES('SPINNING', 6, '02/06/21 20:00:00, 162266040', '02/06/21 21:00:00, 162266400', 25);

-- RESERVA(SOCIO_ID, Hora_Inicio, Asistencia).
CREATE TABLE RESERVA(
    SOCIO_ID INTEGER,
    HORA_INICIO TIMESTAMP,
    ASISTENCIA VARCHAR2(2),
    CONSTRAINT PK_RESERVA PRIMARY KEY(SOCIO_ID, HORA_INICIO),
    CONSTRAINT FK_SOCIO_RESERVA FOREIGN KEY(SOCIO_ID) REFERENCES SOCIO(SOCIO_ID)
);

INSERT INTO RESERVA VALUES(1, '04/06/21 09:00:00, 162279360', 'SI');
INSERT INTO RESERVA VALUES(2, '02/06/21 20:00:00, 162266040', 'SI');
INSERT INTO RESERVA VALUES(3, '01/06/21 19:00:00, 162257040', 'NO');

-- DURACIÓN_CLASES(HORA_INICIO, HORA_FINAL, DURACIÓN).
CREATE TABLE DURACION_CLASES(
    HORA_INICIO TIMESTAMP,
    HORA_FINAL TIMESTAMP,
    DURACION INTEGER, -- MINUTES
    CONSTRAINT PK_DURACION PRIMARY KEY(HORA_INICIO, HORA_FINAL)
);

INSERT INTO DURACION_CLASES VALUES('04/06/21 09:00:00, 162279360', '04/06/21 10:00:00, 162279720', 60);
INSERT INTO DURACION_CLASES VALUES('01/06/21 19:00:00, 162257040', '01/06/21 20:00:00, 162257400', 60);
INSERT INTO DURACION_CLASES VALUES('02/06/21 20:00:00, 162266040', '02/06/21 21:00:00, 162266400', 60);